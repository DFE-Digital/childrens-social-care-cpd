@using Childrens_Social_Care_CPD.Contentful;
@using Childrens_Social_Care_CPD.Contentful.Models;
@using Contentful.Core.Models;

@model DetailedRole

@functions {

    public async Task RenderAccordianSection(string title, Document model)
    {
        <div class="govuk-accordion__section">
            <div class="govuk-accordion__section-header">
                <h2 class="govuk-accordion__section-heading">
                    <span class="govuk-accordion__section-button" id="accordion-with-summary-sections-heading-2">
                        @title
                    </span>
                </h2>
            </div>
            <div id="accordion-with-summary-sections-content-2" class="govuk-accordion__section-content" aria-labelledby="accordion-with-summary-sections-heading-2">
                <partial name="./_RichText" model="model" />
            </div>
        </div>
    }
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-xl">@Model.Title</h1>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <dl class="govuk-summary-list">
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Salary range
                </dt>
                <dd class="govuk-summary-list__value">
                    @Model.SalaryRange <span>depending on location, responsibilities and experience</span>
                </dd>
            </div>
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Summary
                </dt>
                <dd class="govuk-summary-list__value">
                    @Model.Summary
                </dd>
            </div>

            @if (!string.IsNullOrEmpty(Model.OtherNames))
            {
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Other names
                    </dt>
                    <dd class="govuk-summary-list__value">
                        @Model.OtherNames
                    </dd>
                </div>
            }
        </dl>

        <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-with-summary-sections">

            @if (Model.WhatYoullDo != null)
            {
                await RenderAccordianSection("What you'll do", Model.WhatYoullDo);
            }

            @if (Model.SkillsAndKnowledge != null)
            {
                await RenderAccordianSection("Skills and knowledge", Model.SkillsAndKnowledge);
            }

            @if (Model.HowToBecomeOne != null)
            {
                await RenderAccordianSection("How to become one", Model.HowToBecomeOne);
            }

            @if (Model.CareerPathsAndProgression != null)
            {
                await RenderAccordianSection("Career paths and progression", Model.CareerPathsAndProgression);
            }

            @if (Model.CurrentOpportunities != null)
            {
                await RenderAccordianSection("Current opportunities", Model.CurrentOpportunities);
            }
        </div>
    </div>
</div>